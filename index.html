<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stock Market Simulator</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .language-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(255, 255, 255, 0.2);
            border: 2px solid rgba(255, 255, 255, 0.3);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .language-toggle:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.05);
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .game-area {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            padding: 20px;
        }

        .main-panel {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .sidebar {
            background: white;
            border-radius: 15px;
            padding: 20px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }

        .portfolio-summary {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
            padding: 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .portfolio-value {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .cash-balance {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .stocks-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }

        .stock-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .stock-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            border-color: #ff6b35;
        }

        .stock-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .stock-symbol {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .stock-price {
            font-size: 1.4rem;
            font-weight: bold;
        }

        .price-up {
            color: #00b894;
        }

        .price-down {
            color: #e74c3c;
        }

        .stock-change {
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .trading-controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
        }

        .quantity-input {
            flex: 1;
            padding: 8px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn-buy {
            background: linear-gradient(135deg, #00b894, #00a085);
            color: white;
        }

        .btn-sell {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .portfolio-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .portfolio-table th,
        .portfolio-table td {
            padding: 12px;
            text-align: left;
            border-bottom: 2px solid #f0f0f0;
        }

        .portfolio-table th {
            background: linear-gradient(135deg, #ff6b35, #f7931e);
            color: white;
            font-weight: bold;
        }

        .portfolio-table tr:hover {
            background: #f8f9fa;
        }

        .news-section {
            margin-top: 20px;
        }

        .news-item {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 10px;
            border-left: 4px solid #ff6b35;
        }

        .news-title {
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 5px;
        }

        .news-content {
            color: #666;
            font-size: 0.9rem;
        }

        .reset-btn {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            width: 100%;
            margin-top: 20px;
        }

        .performance-indicator {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: bold;
            margin-left: 10px;
        }

        .profit {
            background: #d4edda;
            color: #155724;
        }

        .loss {
            background: #f8d7da;
            color: #721c24;
        }

        .flag {
            display: inline-block;
            width: 20px;
            height: 15px;
            margin-right: 8px;
            border-radius: 2px;
        }

        .flag-in {
            background: linear-gradient(to bottom, #ff9933 33%, #ffffff 33%, #ffffff 66%, #138808 66%);
        }

        @media (max-width: 768px) {
            .game-area {
                grid-template-columns: 1fr;
            }
            
            .stocks-grid {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 2rem;
            }

            .language-toggle {
                position: static;
                margin-bottom: 15px;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <button class="language-toggle" onclick="toggleLanguage()" id="langToggle">
                <span class="flag flag-in"></span>‡§π‡§ø‡§Ç‡§¶‡•Ä
            </button>
            <h1 id="title">üìà Stock Market Simulator</h1>
            <p class="subtitle" id="subtitle">Learn to trade with virtual money - No risk, real learning!</p>
        </div>
        
        <div class="game-area">
            <div class="main-panel">
                <h2 id="stocksTitle">üìä Available Stocks</h2>
                <div class="stocks-grid" id="stocksGrid">
                    <!-- Stocks will be populated here -->
                </div>
                
                <div class="news-section">
                    <h3 id="newsTitle">üì∞ Market News</h3>
                    <div id="newsContainer">
                        <!-- News will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="sidebar">
                <div class="portfolio-summary">
                    <div class="portfolio-value" id="portfolioValue">‚Çπ1,00,000.00</div>
                    <div class="cash-balance" id="cashLabel">Cash: ‚Çπ<span id="cashBalance">100000.00</span></div>
                </div>
                
                <h3 id="portfolioTitle">üìã Your Portfolio</h3>
                <table class="portfolio-table">
                    <thead>
                        <tr>
                            <th id="stockHeader">Stock</th>
                            <th id="sharesHeader">Shares</th>
                            <th id="valueHeader">Value</th>
                            <th id="plHeader">P&L</th>
                        </tr>
                    </thead>
                    <tbody id="portfolioBody">
                        <tr>
                            <td colspan="4" style="text-align: center; color: #666;" id="noPositions">No positions yet. Start trading!</td>
                        </tr>
                    </tbody>
                </table>
                
                <button class="btn reset-btn" onclick="resetGame()" id="resetBtn">üîÑ Reset Game</button>
            </div>
        </div>
    </div>

    <script>
        // Language data
        const translations = {
            en: {
                title: "üìà Stock Market Simulator",
                subtitle: "Learn to trade with virtual money - No risk, real learning!",
                stocksTitle: "üìä Available Stocks",
                newsTitle: "üì∞ Market News", 
                portfolioTitle: "üìã Your Portfolio",
                cashLabel: "Cash: ‚Çπ",
                stockHeader: "Stock",
                sharesHeader: "Shares", 
                valueHeader: "Value",
                plHeader: "P&L",
                noPositions: "No positions yet. Start trading!",
                resetBtn: "üîÑ Reset Game",
                buyBtn: "Buy",
                sellBtn: "Sell",
                qtyPlaceholder: "Qty",
                langToggle: "‡§π‡§ø‡§Ç‡§¶‡•Ä"
            },
            hi: {
                title: "üìà ‡§∂‡•á‡§Ø‡§∞ ‡§¨‡§æ‡§ú‡§º‡§æ‡§∞ ‡§∏‡§ø‡§Æ‡•Å‡§≤‡•á‡§ü‡§∞",
                subtitle: "‡§µ‡§∞‡•ç‡§ö‡•Å‡§Ö‡§≤ ‡§™‡•à‡§∏‡•á ‡§∏‡•á ‡§ü‡•ç‡§∞‡•á‡§°‡§ø‡§Ç‡§ó ‡§∏‡•Ä‡§ñ‡•á‡§Ç - ‡§ï‡•ã‡§à ‡§ú‡•ã‡§ñ‡§ø‡§Æ ‡§®‡§π‡•Ä‡§Ç, ‡§∏‡§ö‡•ç‡§ö‡•Ä ‡§∏‡•Ä‡§ñ!",
                stocksTitle: "üìä ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§∂‡•á‡§Ø‡§∞",
                newsTitle: "üì∞ ‡§¨‡§æ‡§ú‡§º‡§æ‡§∞ ‡§∏‡§Æ‡§æ‡§ö‡§æ‡§∞",
                portfolioTitle: "üìã ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§´‡•ã‡§≤‡§ø‡§Ø‡•ã", 
                cashLabel: "‡§®‡§ï‡§¶: ‚Çπ",
                stockHeader: "‡§∂‡•á‡§Ø‡§∞",
                sharesHeader: "‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ",
                valueHeader: "‡§Æ‡•Ç‡§≤‡•ç‡§Ø", 
                plHeader: "‡§≤‡§æ‡§≠/‡§π‡§æ‡§®‡§ø",
                noPositions: "‡§Ö‡§≠‡•Ä ‡§§‡§ï ‡§ï‡•ã‡§à ‡§™‡•ã‡§ú‡•Ä‡§∂‡§® ‡§®‡§π‡•Ä‡§Ç‡•§ ‡§ü‡•ç‡§∞‡•á‡§°‡§ø‡§Ç‡§ó ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç!",
                resetBtn: "üîÑ ‡§ó‡•á‡§Æ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç",
                buyBtn: "‡§ñ‡§∞‡•Ä‡§¶‡•á‡§Ç",
                sellBtn: "‡§¨‡•á‡§ö‡•á‡§Ç", 
                qtyPlaceholder: "‡§Æ‡§æ‡§§‡•ç‡§∞‡§æ",
                langToggle: "English"
            }
        };

        // Game state
        let gameState = {
            cash: 100000,
            portfolio: {},
            startingCash: 100000,
            language: 'en'
        };

        // Indian stock data with popular companies
        let stocks = {
            RELIANCE: { name: "Reliance Industries", nameHi: "‡§∞‡§ø‡§≤‡§æ‡§Ø‡§Ç‡§∏ ‡§á‡§Ç‡§°‡§∏‡•ç‡§ü‡•ç‡§∞‡•Ä‡§ú", price: 2450.00, change: 0, owned: 0, avgCost: 0 },
            TCS: { name: "Tata Consultancy Services", nameHi: "‡§ü‡§æ‡§ü‡§æ ‡§ï‡§Ç‡§∏‡§≤‡•ç‡§ü‡•á‡§Ç‡§∏‡•Ä ‡§∏‡§∞‡•ç‡§µ‡§ø‡§∏‡•á‡§ú", price: 3650.00, change: 0, owned: 0, avgCost: 0 },
            HDFCBANK: { name: "HDFC Bank", nameHi: "‡§è‡§ö‡§°‡•Ä‡§è‡§´‡§∏‡•Ä ‡§¨‡•à‡§Ç‡§ï", price: 1580.00, change: 0, owned: 0, avgCost: 0 },
            INFY: { name: "Infosys Limited", nameHi: "‡§á‡§Ç‡§´‡•ã‡§∏‡§ø‡§∏ ‡§≤‡§ø‡§Æ‡§ø‡§ü‡•á‡§°", price: 1420.00, change: 0, owned: 0, avgCost: 0 },
            HINDUNILVR: { name: "Hindustan Unilever", nameHi: "‡§π‡§ø‡§Ç‡§¶‡•Å‡§∏‡•ç‡§§‡§æ‡§® ‡§Ø‡•Ç‡§®‡§ø‡§≤‡•Ä‡§µ‡§∞", price: 2380.00, change: 0, owned: 0, avgCost: 0 },
            ICICIBANK: { name: "ICICI Bank", nameHi: "‡§Ü‡§à‡§∏‡•Ä‡§Ü‡§à‡§∏‡•Ä‡§Ü‡§à ‡§¨‡•à‡§Ç‡§ï", price: 950.00, change: 0, owned: 0, avgCost: 0 },
            BHARTIARTL: { name: "Bharti Airtel", nameHi: "‡§≠‡§æ‡§∞‡§§‡•Ä ‡§è‡§Ø‡§∞‡§ü‡•á‡§≤", price: 820.00, change: 0, owned: 0, avgCost: 0 },
            ITC: { name: "ITC Limited", nameHi: "‡§Ü‡§à‡§ü‡•Ä‡§∏‡•Ä ‡§≤‡§ø‡§Æ‡§ø‡§ü‡•á‡§°", price: 415.00, change: 0, owned: 0, avgCost: 0 }
        };

        // Indian market news events
        const newsEvents = {
            en: [
                { title: "RBI Monetary Policy Decision", content: "Reserve Bank of India announces new policy rates affecting banking stocks", impact: "mixed" },
                { title: "IT Sector Shows Strong Growth", content: "Indian IT companies report robust quarterly earnings with increased export demand", impact: "positive" },
                { title: "Monsoon Forecast Impacts FMCG", content: "Normal monsoon predictions boost consumer goods and rural-focused stocks", impact: "positive" },
                { title: "FII Investment Flows", content: "Foreign institutional investors increase stake in Indian equity markets", impact: "positive" },
                { title: "GST Policy Changes", content: "New GST regulations may impact various sectors differently", impact: "mixed" },
                { title: "Digital India Initiative", content: "Government's digital push benefits technology and telecom sectors", impact: "positive" },
                { title: "Oil Price Volatility", content: "Crude oil price fluctuations affect energy and petrochemical companies", impact: "mixed" }
            ],
            hi: [
                { title: "‡§Ü‡§∞‡§¨‡•Ä‡§Ü‡§à ‡§Æ‡•å‡§¶‡•ç‡§∞‡§ø‡§ï ‡§®‡•Ä‡§§‡§ø ‡§®‡§ø‡§∞‡•ç‡§£‡§Ø", content: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§∞‡§ø‡§ú‡§º‡§∞‡•ç‡§µ ‡§¨‡•à‡§Ç‡§ï ‡§®‡•á ‡§®‡§à ‡§®‡•Ä‡§§‡§ø‡§ó‡§§ ‡§¶‡§∞‡•ã‡§Ç ‡§ï‡•Ä ‡§ò‡•ã‡§∑‡§£‡§æ ‡§ï‡•Ä ‡§π‡•à ‡§ú‡•ã ‡§¨‡•à‡§Ç‡§ï‡§ø‡§Ç‡§ó ‡§∂‡•á‡§Ø‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡•á‡§ó‡•Ä", impact: "mixed" },
                { title: "‡§Ü‡§à‡§ü‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§Æ‡•á‡§Ç ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§µ‡•É‡§¶‡•ç‡§ß‡§ø", content: "‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§Ü‡§à‡§ü‡•Ä ‡§ï‡§Ç‡§™‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§®‡•á ‡§¨‡§¢‡§º‡§§‡•Ä ‡§®‡§ø‡§∞‡•ç‡§Ø‡§æ‡§§ ‡§Æ‡§æ‡§Ç‡§ó ‡§ï‡•á ‡§∏‡§æ‡§• ‡§Æ‡§ú‡§¨‡•Ç‡§§ ‡§§‡§ø‡§Æ‡§æ‡§π‡•Ä ‡§Ü‡§Ø ‡§ï‡•Ä ‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü ‡§¶‡•Ä", impact: "positive" },
                { title: "‡§Æ‡§æ‡§®‡§∏‡•Ç‡§® ‡§™‡•Ç‡§∞‡•ç‡§µ‡§æ‡§®‡•Å‡§Æ‡§æ‡§® ‡§è‡§´‡§è‡§Æ‡§∏‡•Ä‡§ú‡•Ä ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§", content: "‡§∏‡§æ‡§Æ‡§æ‡§®‡•ç‡§Ø ‡§Æ‡§æ‡§®‡§∏‡•Ç‡§® ‡§ï‡•Ä ‡§≠‡§µ‡§ø‡§∑‡•ç‡§Ø‡§µ‡§æ‡§£‡•Ä ‡§â‡§™‡§≠‡•ã‡§ï‡•ç‡§§‡§æ ‡§µ‡§∏‡•ç‡§§‡•Å‡§ì‡§Ç ‡§î‡§∞ ‡§ó‡•ç‡§∞‡§æ‡§Æ‡•Ä‡§£-‡§ï‡•á‡§Ç‡§¶‡•ç‡§∞‡§ø‡§§ ‡§∂‡•á‡§Ø‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§¨‡§¢‡§º‡§æ‡§µ‡§æ ‡§¶‡•á‡§§‡•Ä ‡§π‡•à", impact: "positive" },
                { title: "‡§µ‡§ø‡§¶‡•á‡§∂‡•Ä ‡§®‡§ø‡§µ‡•á‡§∂ ‡§™‡•ç‡§∞‡§µ‡§æ‡§π", content: "‡§µ‡§ø‡§¶‡•á‡§∂‡•Ä ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§ó‡§§ ‡§®‡§ø‡§µ‡•á‡§∂‡§ï‡•ã‡§Ç ‡§®‡•á ‡§≠‡§æ‡§∞‡§§‡•Ä‡§Ø ‡§á‡§ï‡•ç‡§µ‡§ø‡§ü‡•Ä ‡§¨‡§æ‡§ú‡§æ‡§∞‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§π‡§ø‡§∏‡•ç‡§∏‡•á‡§¶‡§æ‡§∞‡•Ä ‡§¨‡§¢‡§º‡§æ‡§à", impact: "positive" },
                { title: "‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä ‡§®‡•Ä‡§§‡§ø ‡§¨‡§¶‡§≤‡§æ‡§µ", content: "‡§®‡§è ‡§ú‡•Ä‡§è‡§∏‡§ü‡•Ä ‡§®‡§ø‡§Ø‡§Æ ‡§µ‡§ø‡§≠‡§ø‡§®‡•ç‡§® ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§Ö‡§≤‡§ó ‡§§‡§∞‡•Ä‡§ï‡•á ‡§∏‡•á ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞ ‡§∏‡§ï‡§§‡•á ‡§π‡•à‡§Ç", impact: "mixed" },
                { title: "‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§á‡§Ç‡§°‡§ø‡§Ø‡§æ ‡§™‡§π‡§≤", content: "‡§∏‡§∞‡§ï‡§æ‡§∞ ‡§ï‡§æ ‡§°‡§ø‡§ú‡§ø‡§ü‡§≤ ‡§™‡•Å‡§∂ ‡§™‡•ç‡§∞‡•å‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï‡•Ä ‡§î‡§∞ ‡§¶‡•Ç‡§∞‡§∏‡§Ç‡§ö‡§æ‡§∞ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞‡•ã‡§Ç ‡§ï‡•ã ‡§≤‡§æ‡§≠ ‡§™‡§π‡•Å‡§Ç‡§ö‡§æ‡§§‡§æ ‡§π‡•à", impact: "positive" },
                { title: "‡§§‡•á‡§≤ ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§Ö‡§∏‡•ç‡§•‡§ø‡§∞‡§§‡§æ", content: "‡§ï‡§ö‡•ç‡§ö‡•á ‡§§‡•á‡§≤ ‡§ï‡•Ä ‡§ï‡•Ä‡§Æ‡§§‡•ã‡§Ç ‡§Æ‡•á‡§Ç ‡§â‡§§‡§æ‡§∞-‡§ö‡§¢‡§º‡§æ‡§µ ‡§ä‡§∞‡•ç‡§ú‡§æ ‡§î‡§∞ ‡§™‡•á‡§ü‡•ç‡§∞‡•ã‡§ï‡•á‡§Æ‡§ø‡§ï‡§≤ ‡§ï‡§Ç‡§™‡§®‡§ø‡§Ø‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡§ø‡§§ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à", impact: "mixed" }
            ]
        };

        // Toggle language function
        function toggleLanguage() {
            gameState.language = gameState.language === 'en' ? 'hi' : 'en';
            updateLanguage();
            renderStocks();
            updatePortfolioDisplay();
        }

        // Update language texts
        function updateLanguage() {
            const lang = gameState.language;
            const t = translations[lang];
            
            document.getElementById('title').textContent = t.title;
            document.getElementById('subtitle').textContent = t.subtitle;
            document.getElementById('stocksTitle').textContent = t.stocksTitle;
            document.getElementById('newsTitle').textContent = t.newsTitle;
            document.getElementById('portfolioTitle').textContent = t.portfolioTitle;
            document.getElementById('stockHeader').textContent = t.stockHeader;
            document.getElementById('sharesHeader').textContent = t.sharesHeader;
            document.getElementById('valueHeader').textContent = t.valueHeader;
            document.getElementById('plHeader').textContent = t.plHeader;
            document.getElementById('resetBtn').textContent = t.resetBtn;
            document.getElementById('langToggle').innerHTML = `<span class="flag flag-in"></span>${t.langToggle}`;
            
            // Update cash label
            const cashBalance = document.getElementById('cashBalance');
            document.getElementById('cashLabel').innerHTML = `${t.cashLabel}<span id="cashBalance">${cashBalance.textContent}</span>`;
        }

        // Initialize the game
        function initGame() {
            updateStockPrices();
            renderStocks();
            updatePortfolioDisplay();
            generateNews();
            
            // Start price updates
            setInterval(updateStockPrices, 3000);
            setInterval(generateNews, 15000);
        }

        // Update stock prices with realistic movements
        function updateStockPrices() {
            Object.keys(stocks).forEach(symbol => {
                const stock = stocks[symbol];
                const volatility = 0.02; // 2% max change
                const change = (Math.random() - 0.5) * 2 * volatility;
                const newPrice = stock.price * (1 + change);
                
                stock.change = ((newPrice - stock.price) / stock.price) * 100;
                stock.price = Math.max(newPrice, 1); // Prevent negative prices
            });
            
            renderStocks();
            updatePortfolioDisplay();
        }

        // Render stock cards
        function renderStocks() {
            const grid = document.getElementById('stocksGrid');
            const lang = gameState.language;
            const t = translations[lang];
            grid.innerHTML = '';
            
            Object.entries(stocks).forEach(([symbol, stock]) => {
                const card = document.createElement('div');
                card.className = 'stock-card';
                
                const changeClass = stock.change >= 0 ? 'price-up' : 'price-down';
                const changeSymbol = stock.change >= 0 ? '+' : '';
                const stockName = lang === 'hi' ? stock.nameHi : stock.name;
                
                card.innerHTML = `
                    <div class="stock-header">
                        <div>
                            <div class="stock-symbol">${symbol}</div>
                            <div style="font-size: 0.9rem; color: #666;">${stockName}</div>
                        </div>
                        <div class="stock-price ${changeClass}">‚Çπ${stock.price.toFixed(2)}</div>
                    </div>
                    <div class="stock-change ${changeClass}">
                        ${changeSymbol}${stock.change.toFixed(2)}%
                    </div>
                    <div class="trading-controls">
                        <input type="number" class="quantity-input" id="qty-${symbol}" 
                               placeholder="${t.qtyPlaceholder}" min="1" value="1">
                        <button class="btn btn-buy" onclick="buyStock('${symbol}')">${t.buyBtn}</button>
                        <button class="btn btn-sell" onclick="sellStock('${symbol}')" 
                                ${stock.owned === 0 ? 'disabled' : ''}>${t.sellBtn}</button>
                    </div>
                `;
                
                grid.appendChild(card);
            });
        }

        // Buy stock function
        function buyStock(symbol) {
            const quantity = parseInt(document.getElementById(`qty-${symbol}`).value) || 1;
            const stock = stocks[symbol];
            const totalCost = stock.price * quantity;
            const lang = gameState.language;
            
            if (totalCost > gameState.cash) {
                alert(lang === 'hi' ? '‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§ß‡§®!' : 'Insufficient funds!');
                return;
            }
            
            // Update average cost
            const currentValue = stock.owned * stock.avgCost;
            const newValue = currentValue + totalCost;
            const newShares = stock.owned + quantity;
            
            stock.avgCost = newValue / newShares;
            stock.owned = newShares;
            gameState.cash -= totalCost;
            
            updatePortfolioDisplay();
            renderStocks();
            
            const message = lang === 'hi' ? 
                `${symbol} ‡§ï‡•á ${quantity} ‡§∂‡•á‡§Ø‡§∞ ‚Çπ${totalCost.toFixed(2)} ‡§Æ‡•á‡§Ç ‡§ñ‡§∞‡•Ä‡§¶‡•á ‡§ó‡§è` : 
                `Bought ${quantity} shares of ${symbol} for ‚Çπ${totalCost.toFixed(2)}`;
            showNotification(message, 'success');
        }

        // Sell stock function
        function sellStock(symbol) {
            const quantity = parseInt(document.getElementById(`qty-${symbol}`).value) || 1;
            const stock = stocks[symbol];
            const lang = gameState.language;
            
            if (quantity > stock.owned) {
                alert(lang === 'hi' ? '‡§Ü‡§™‡§ï‡•á ‡§™‡§æ‡§∏ ‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§ ‡§∂‡•á‡§Ø‡§∞ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à‡§Ç!' : 'You don\'t own enough shares!');
                return;
            }
            
            const totalValue = stock.price * quantity;
            stock.owned -= quantity;
            gameState.cash += totalValue;
            
            if (stock.owned === 0) {
                stock.avgCost = 0;
            }
            
            updatePortfolioDisplay();
            renderStocks();
            
            const message = lang === 'hi' ? 
                `${symbol} ‡§ï‡•á ${quantity} ‡§∂‡•á‡§Ø‡§∞ ‚Çπ${totalValue.toFixed(2)} ‡§Æ‡•á‡§Ç ‡§¨‡•á‡§ö‡•á ‡§ó‡§è` : 
                `Sold ${quantity} shares of ${symbol} for ‚Çπ${totalValue.toFixed(2)}`;
            showNotification(message, 'success');
        }

        // Update portfolio display
        function updatePortfolioDisplay() {
            const portfolioBody = document.getElementById('portfolioBody');
            const cashBalance = document.getElementById('cashBalance');
            const portfolioValue = document.getElementById('portfolioValue');
            const lang = gameState.language;
            const t = translations[lang];
            
            let totalValue = gameState.cash;
            let hasPositions = false;
            
            portfolioBody.innerHTML = '';
            
            Object.entries(stocks).forEach(([symbol, stock]) => {
                if (stock.owned > 0) {
                    hasPositions = true;
                    const currentValue = stock.price * stock.owned;
                    const costBasis = stock.avgCost * stock.owned;
                    const pnl = currentValue - costBasis;
                    const pnlPercent = (pnl / costBasis) * 100;
                    
                    totalValue += currentValue;
                    
                    const row = document.createElement('tr');
                    const pnlClass = pnl >= 0 ? 'profit' : 'loss';
                    
                    row.innerHTML = `
                        <td>${symbol}</td>
                        <td>${stock.owned}</td>
                        <td>‚Çπ${currentValue.toFixed(2)}</td>
                        <td>
                            <span class="performance-indicator ${pnlClass}">
                                ${pnl >= 0 ? '+' : ''}‚Çπ${pnl.toFixed(2)} (${pnlPercent.toFixed(1)}%)
                            </span>
                        </td>
                    `;
                    
                    portfolioBody.appendChild(row);
                }
            });
            
            if (!hasPositions) {
                portfolioBody.innerHTML = `<tr><td colspan="4" style="text-align: center; color: #666;">${t.noPositions}</td></tr>`;
            }
            
            cashBalance.textContent = gameState.cash.toFixed(2);
            portfolioValue.textContent = `‚Çπ${totalValue.toFixed(2)}`;
            
            // Add performance indicator to portfolio value
            const totalReturn = totalValue - gameState.startingCash;
            const returnPercent = (totalReturn / gameState.startingCash) * 100;
            
            if (totalReturn !== 0) {
                const indicator = totalReturn >= 0 ? 'profit' : 'loss';
                portfolioValue.innerHTML = `
                    ‚Çπ${totalValue.toFixed(2)}
                    <div style="font-size: 0.8rem; margin-top: 5px;">
                        <span class="performance-indicator ${indicator}">
                            ${totalReturn >= 0 ? '+' : ''}‚Çπ${totalReturn.toFixed(2)} (${returnPercent.toFixed(1)}%)
                        </span>
                    </div>
                `;
            }
        }

        // Generate market news
        function generateNews() {
            const newsContainer = document.getElementById('newsContainer');
            const lang = gameState.language;
            const newsArray = newsEvents[lang];
            const randomNews = newsArray[Math.floor(Math.random() * newsArray.length)];
            
            const newsItem = document.createElement('div');
            newsItem.className = 'news-item';
            newsItem.innerHTML = `
                <div class="news-title">${randomNews.title}</div>
                <div class="news-content">${randomNews.content}</div>
            `;
            
            newsContainer.insertBefore(newsItem, newsContainer.firstChild);
            
            // Keep only last 5 news items
            while (newsContainer.children.length > 5) {
                newsContainer.removeChild(newsContainer.lastChild);
            }
            
            // Apply news impact to stocks
            if (Math.random() < 0.3) { // 30% chance news affects prices
                const affectedStocks = Object.keys(stocks).slice(0, Math.floor(Math.random() * 3) + 1);
                let impact = 0;
                
                if (randomNews.impact === 'positive') impact = 0.05;
                else if (randomNews.impact === 'negative') impact = -0.05;
                else impact = (Math.random() - 0.5) * 0.04; // mixed impact
                
                affectedStocks.forEach(symbol => {
                    stocks[symbol].price *= (1 + impact + (Math.random() - 0.5) * 0.02);
                });
            }
        }

        // Show notification
        function showNotification(message, type) {
            const emoji = type === 'success' ? '‚úÖ' : '‚ùå';
            alert(`${emoji} ${message}`);
        }

        // Reset game
        function resetGame() {
            const lang = gameState.language;
            const confirmMsg = lang === 'hi' ? 
                '‡§ï‡•ç‡§Ø‡§æ ‡§Ü‡§™ ‡§µ‡§æ‡§ï‡§à ‡§ó‡•á‡§Æ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡§®‡§æ ‡§ö‡§æ‡§π‡§§‡•á ‡§π‡•à‡§Ç? ‡§á‡§∏‡§∏‡•á ‡§Ü‡§™‡§ï‡§æ ‡§™‡•ã‡§∞‡•ç‡§ü‡§´‡•ã‡§≤‡§ø‡§Ø‡•ã ‡§ï‡•ç‡§≤‡§ø‡§Ö‡§∞ ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡§æ ‡§î‡§∞ ‡§Ü‡§™‡§ï‡§æ ‡§®‡§ï‡§¶ ‚Çπ1,00,000 ‡§™‡§∞ ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§π‡•ã ‡§ú‡§æ‡§è‡§ó‡§æ‡•§' :
                'Are you sure you want to reset the game? This will clear your portfolio and reset your cash to ‚Çπ1,00,000.';
            
            if (confirm(confirmMsg)) {
                gameState.cash = 100000;
                gameState.startingCash = 100000;
                
                Object.keys(stocks).forEach(symbol => {
                    stocks[symbol].owned = 0;
                    stocks[symbol].avgCost = 0;
                });
